{% extends "base/default.html" %}

{% load static %}

{% block title %}Recipe{% endblock %}

{% block style %}
    <link rel="stylesheet" href="{% static 'css/recipe/edit.css' %}">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta2/dist/css/bootstrap-select.min.css">
{% endblock %}

{% block content %}
    <div class="container">
        <div class="mt-2">
            <h2 class="text-uppercase">{{ title }}</h2>
        </div>
        <hr>
        {% if message %}
            <div>{{ message }}</div>
        {% endif %}
        <form action="" class="mt-3" method="post"
              id="recipe-form" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="row">
                <div class="col-12 col-sm-5 mt-2">
                    <h5 class="border-bottom pb-2">Describe your recipe</h5>
                    <div class="form-group">
                        <label for="recipe-name">Recipe name</label>
                        <input class="form-control" type="text"
                               name="recipe_name" value="{{ recipe.recipe_name.value }}"
                               id="recipe-name" maxlength="100"
                               placeholder="Recipe name" required>
                    </div>
                    <div class="form-group">
                        <label for="category">Category</label>
                        <select class="form-control selectpicker" name="category"
                                data-live-search="true" required id="category">
                            {% for c in category %}
                                <option value="{{ c.pk }}">{{ c.title }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="description">Description</label>
                        <input class="form-control" type="text"
                               name="description" value="{{ recipe.description.value }}"
                               id="description" maxlength="100"
                               placeholder="Description" required>
                    </div>
                    <div class="form-group">
                        <label for="directions">Directions</label>
                        <textarea class="form-control" name="directions"
                                  id="directions" maxlength="100"
                                  placeholder="Directions" required
                        >{{ recipe.directions.value }}</textarea>
                    </div>
                    <div class="form-group">
                        <label for="ingredients">Ingredients</label>
                        <textarea class="form-control" name="ingredients"
                                  id="ingredients" maxlength="100"
                                  placeholder="Ingredients" required
                        >{{ recipe.ingredients.value }}</textarea>
                    </div>
                    <div class="form-group row">
                        <label for="calories" class="col-sm-4 mt-1">Calories</label>
                        <div class="input-group col-sm-8">
                            <input class="form-control" type="number"
                                   name="calories" value="{{ recipe.calories.value|default:10 }}"
                                   id="calories" min="0" required>
                            <div class="input-group-append">
                                <span class="input-group-text">kcal</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="total-time" class="col-sm-4 mt-1">Cooking Time</label>
                        <div class="input-group col-sm-8">
                            <input class="form-control" type="number"
                                   name="total_time" value="{{ recipe.total_time.value|default:10 }}"
                                   id="total-time" min="0" required>
                            <div class="input-group-append">
                                <span class="input-group-text">minutes</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-7 mt-2">
                    <h5 class="border-bottom pb-2 mb-2">Share your image here</h5>
                    <ul class="nav nav-tabs row">
                        <li class="nav-item col-6">
                            <a class="nav-link active" data-toggle="tab"
                               href="#tab-image" id="nav-image">Using An Image</a>
                        </li>
                        <li class="nav-item col-6">
                            <a class="nav-link" data-toggle="tab"
                               href="#tab-image-url" id="nav-image-url">Using Image Url</a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane active" id="tab-image">
                            <div class="form-group row mt-4 image-input d-flex justify-content-center align-items-center"
                                 id="image-upload">
                                <label for="image" class="col-12 col-sm-5">Upload your image here</label>
                                <input type="file" class="form-control-file col-12 col-sm-7" id="image" name="image">
                                <input type="hidden" id="hidden-image-url"
                                       value="{% if recipe.image.value %}{{ recipe.image.value.url }}{% endif %}">
                            </div>
                            <hr>
                            <div class="mt-2">
                                <p>Preview your image here</p>
                                <div class="row justify-content-center">
                                    <div class="col-12 col-sm-8">
                                        <div id="preview-image"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="tab-image-url">
                            <div class="form-group mt-4 image-input">
                                <label for="image-url">Paste your image url here</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="image-url" name="image_url"
                                           placeholder="https://example.com/"
                                           value="
                                                   {% if recipe.image_url.value %}{{ recipe.image_url.value }}{% endif %}">
                                    <div class="input-group-append">
                                        <button class="btn btn-primary" type="button" id="btn-preview">Preview</button>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div class="mt-2">
                                <p>Preview your image here</p>
                                <div class="row justify-content-center">
                                    <div class="col-12 col-sm-8">
                                        <div id="preview-image-url"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <div>
            <button class="btn btn-success" id="btn-submit">Submit</button>
        </div>
    </div>
{% endblock %}

{% block script %}
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta2/dist/js/bootstrap-select.min.js"></script>
    <script src="{% static 'js/recipe/edit.js' %}"></script>
{% endblock %}